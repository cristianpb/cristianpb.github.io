---
layout: default
---

<amp-animation id="showAnim"
  layout="nodisplay">
  <script type="application/json">
    {
      "duration": "200ms",
      "fill": "both",
      "iterations": "1",
      "direction": "alternate",
      "animations": [{
        "selector": "#content-toc",
        "keyframes": [{
          "opacity": "1",
          "visibility": "visible"
        }]
      }]
    }
  </script>
</amp-animation>

<amp-animation id="hideAnim"
  layout="nodisplay">
  <script type="application/json">
    {
      "duration": "200ms",
      "fill": "both",
      "iterations": "1",
      "direction": "alternate",
      "animations": [{
        "selector": "#content-toc",
        "keyframes": [{
          "opacity": "0",
          "visibility": "hidden"
        }]
      }]
    }
  </script>
</amp-animation>

<amp-animation id="spinAnimation"
               layout="nodisplay">
  <script type="application/json">
    {
      "duration": "1s",
      "fill": "both",
      "direction": "alternate",
      "animations": [{
        "selector": ".progress",
        "keyframes": [{
          "transform": "translateX(105%)"
        }]
      }]
    }
  </script>
</amp-animation>

<div class="fixed bottom-0 z-50 progress"></div>
<div class="px-8 text-center md:px-32">
  <h1 class="mt-8">{{ page.title }}</h1>
  <p>
    <time datetime="{{ page.date | date_to_xmlschema }}"
          itemprop="datePublished"> 
      üìÖ {{ page.date | date: "%b %-d, %Y" }}</time>
    ‚è≥ {% include read_time.html %} read time 
    <amp-state id="currentViews" src="/stats/analytics-pages.json"></amp-state>
    <span class="underline" on="tap:currentViews.refresh;" [hidden]="currentViews.length > 0" role="button" tabindex="">‚ù§Ô∏è Views</span>
    <span [text]="'üî≠ ' + currentViews.filter(a => a.url == '{{ page.url }}' )[0].users + ' views this week'"></span>
  </p>
  <br>
  <div class="mb-4">
    {% for cat in page.categories %}
    <a class="text-xs badge badge-info gap-2" href="/blog/categories#{{ cat }}"> {{ cat }}</a>
    {% endfor %}
    {% for cat in page.tags %}
    <a class="text-xs badge gap-2" href="/blog/tags#{{ cat }}">{% include tags/{{ cat }}.svg %} &nbsp; {{ cat }}</a>
    {% endfor %}
  </div>
</div>

<div class="container px-4">
  <div class="flex">
    <div class="flex-auto w-0 md:w-2/12">
    </div>
    <div class="flex-auto w-full md:w-8/12">
      <div class="text-justify">
        <amp-position-observer on="enter:showAnim.start; exit:hideAnim.start"
                               layout="nodisplay">
        </amp-position-observer>
        <amp-position-observer on="scroll:spinAnimation.seekTo(percent=event.percent)"
                               layout="nodisplay">
        </amp-position-observer>
        {{ content }}
      </div>
    </div>
    <div class="flex-auto w-0 md:w-2/12">
      <div id="content-toc" class="fixed hidden text-xs font-semibold md:block">
        {% include toc.html html=content anchor_class="title.is-7"%}
      </div>
    </div>

  </div>
</div>

<div class="container px-4 mt-8">
  <div class="flex">
    <div class="w-0 md:w-2/12">
    </div>
    <div class="w-full md:w-8/12">
  {% assign maxRelated = 3 %}
  {% assign recNum = 0 %}
  {% assign recoList = '' %}
  {% assign minCommonTags = page.tags.size %}
  {% for counter in (0..page.tags.size) %}
    {% if minCommonTags == 0 %} 
      {% break %}
    {% endif %}

    {% for post in site.posts %}
      {% assign sameTagCount = 0 %}
      {% assign commonTags = '' %}
      {% for tag in post.tags %}
        {% if post.url != page.url %}
          {% if page.tags contains tag %}
            {% assign sameTagCount = sameTagCount | plus: 1 %}
            {% capture tagmarkup %} {{ tag }} {% endcapture %}
            {% assign commonTags = commonTags | append: tagmarkup %}
          {% endif %}
        {% endif %}
      {% endfor %}
      {% if sameTagCount >= minCommonTags and recNum <= maxRelated %}
        {% unless recoList contains post.url %}
          {% assign recoList = recoList | append: post.url %}
          {% if recNum == 0 %}
            <h3 class="my-4 text-xl font-medium leading-5">In relation with üè∑Ô∏è {{ page.tags | join: ", " }}:</h3>
          {% endif %}
          <div class="my-4 shadow-xl card lg:card-side bg-base-100">
            <figure>
              <a class="image" href="{% if post.link %}{{ post.link }}{% else %}{{ post.url }}{% endif %}">
                <img src="{{ post.image.path }}" alt="{{ post.title }}"/>
              </a>
            </figure>
            <div class="card-body">
              <h2 class="card-title">
                  <a class="title is-6" href="{% if post.link %}{{ post.link }}{% else %}{{ post.url }}{% endif %}">{{ post.title }}</a>
              </h2>
              <p class="text-sm">
                {{ post.description }}
              </p>
              <div class="justify-end card-actions">

                  <div class="mb-4">
                    <span class="text-xs badge">üìÖ&nbsp;{{ post.date | date: "%b %-d, %Y" }}</span>
                    {% if post.link %}
                    <span class="text-xs badge badge-info gap-2">
                      {% include logos/external-link.svg color='#ffffff' %}
                      &nbsp;{{ post.source }}</span>
                    {% endif %}
                    {% for tag in post.tags %}
                    <a class="text-xs badge gap-2 " href="/blog/tags#{{ tag }}">{% include tags/{{ tag }}.svg %} &nbsp;
                      <span {% if page.tags contains tag %}class="under"{% endif %}>
                        {{ tag }}
                      </span>
                      </a>
                    {% endfor %}
                  </div>
              </div>
            </div>
          </div>
          {% assign recNum = recNum | plus: 1 %}
        {% endunless %}
      {% endif %}
    {% endfor %}
    {% assign minCommonTags = minCommonTags | minus: 1%}
  {% endfor %}
  {% if recNum == 0 %}
    <h3 class="subtitle">Latest articles: </h3>
    {% for post in site.posts limit: 2 %}
    <div class="box">
      <div class="columns is-multiline">
        <div class="column is-3-desktop is-12-mobile has-text-centered">
          <a class="image" href="{% if post.link %}{{ post.link }}{% else %}{{ post.url }}{% endif %}">
            <amp-img src="{{ post.image.path }}" layout="responsive" width="300" height="200" alt="{{ post.title }}"></amp-img>
          </a>
        </div>
        <div class="column is-9-desktop is-12-mobile">
          <div class="content">
            <a class="title is-6" href="{% if post.link %}{{ post.link }}{% else %}{{ post.url }}{% endif %}">{{ post.title }}</a>
            <p class="text-xs">
              {{ post.description }}
            </p>
            <div class="tags has-addons">
              <span class="tag"> üìÖ &nbsp;{{ post.date | date: "%b %-d, %Y" }}</span>
              {% if post.link %}
              <span class="tag is-danger"> 
                {% include logos/external-link.svg color='#ffffff' %}
                &nbsp;{{ post.source }}</span>
              {% endif %}
              {% for tag in post.tags %}
              <a class="tag {% if page.tags contains tag %}is-info{% endif %}" href="/blog/tags#{{ tag }}"> {{ tag }}</a>
              {% endfor %}
            </div>
          </div>
        </div>
      </div>
    </div>
    {% endfor %}
  {% endif %}
    </div>
  </div>
</div>



<div class="container px-4 my-8">
  <div class="flex text-center">
    <div class="w-0 md:w-2/12">
    </div>
    <div class="w-full md:w-8/12">
      <a target="_blank" href="https://feeds.feedburner.com/cristianpb" class="btn">
        Subscribe to my newsletter üì∞
      </a>
      <br>
      <br>
      <p class="my-4 text-xl font-medium leading-5">
        and share it with your friends:
      </p>
      {% include amp-social-share.html %}
    </div>
  </div>
</div>
